import requests
import re
import base64
from fontTools.ttLib import TTFont
from io import BytesIO

import xml.dom.minidom as xmldom
import os

response = requests.get(url="https://www.china.cn/hunheji/3795900957.html").text
print(response)
result = re.search(r"base64,(.*?)\)", response, flags=re.S).group(1)
# print("result  "+result)

# result = "T1RUTwAJAIAAAwAQQ0ZGIPCss8QAAATsAAAEqk9TLzJlXV/IAAABAAAAAGBjbWFwAC4KzgAABAQAAADIaGVhZBjkTuQAAACcAAAANmhoZWEA3wBdAAAA1AAAACRobXR4CPoAAAAACZgAAAAsbWF4cAALUAAAAAD4AAAABm5hbWUKXYQxAAABYAAAAqNwb3N0AAMAAAAABMwAAAAgAAEAAAABAADgGUa+Xw889QADAQAAAAAA3KWIHAAAAADcpYgcAAT//wB+ALUAAAADAAIAAAAAAAAAAQAAAN3/xQAAAIwAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAFAAAAsAAAADAH8B9AAFAAACigK7AAAAjAKKArsAAAHfADEBAgAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAACBYWFhYAEAAdQB+AN3/xQAAALUAAQAAAAEAAAAAAG8AtQAAAAAAAAAAACIBngABAAAAAAAAAAEAQgABAAAAAAABAAwAAAABAAAAAAACAAYAJAABAAAAAAADABUAxgABAAAAAAAEABMANgABAAAAAAAFAAsApQABAAAAAAAGABIAbwABAAAAAAAHAAEAQgABAAAAAAAIAAEAQgABAAAAAAAJAAEAQgABAAAAAAAKAAEAQgABAAAAAAALAAEAQgABAAAAAAAMAAEAQgABAAAAAAANAAEAQgABAAAAAAAOAAEAQgABAAAAAAAQAAwAAAABAAAAAAARAAYAJAADAAEECQAAAAIAYQADAAEECQABABgADAADAAEECQACAAwAKgADAAEECQADACoA2wADAAEECQAEACYASQADAAEECQAFABYAsAADAAEECQAGACQAgQADAAEECQAHAAIAYQADAAEECQAIAAIAYQADAAEECQAJAAIAYQADAAEECQAKAAIAYQADAAEECQALAAIAYQADAAEECQAMAAIAYQADAAEECQANAAIAYQADAAEECQAOAAIAYQADAAEECQAQABgADAADAAEECQARAAwAKk9wZW5UeXBlU2FucwBPAHAAZQBuAFQAeQBwAGUAUwBhAG4Ac01lZGl1bQBNAGUAZABpAHUAbU9wZW5UeXBlU2FucyBNZWRpdW0ATwBwAGUAbgBUAHkAcABlAFMAYQBuAHMAIABNAGUAZABpAHUAbU9wZW5UeXBlU2Fuc01lZGl1bQBPAHAAZQBuAFQAeQBwAGUAUwBhAG4AcwBNAGUAZABpAHUAbVZlcnNpb24gMC4xAFYAZQByAHMAaQBvAG4AIAAwAC4AMSA6T3BlblR5cGVTYW5zIE1lZGl1bQAgADoATwBwAGUAbgBUAHkAcABlAFMAYQBuAHMAIABNAGUAZABpAHUAbQAAAAACAAMAAQAAABQAAwAKAAAANAAEACAAAAAEAAQAAQAAAAD//wAAAAD//wAAAAEAAAAAAAwAAAAAAJQAAAAAAAAACwAAAAAAAAAAAAAAAAABAHUAAQB1AAAAAQABAHYAAQB2AAAAAgABAHcAAQB3AAAAAwABAHgAAQB4AAAABAABAHkAAQB5AAAABQABAHoAAQB6AAAABgABAHsAAQB7AAAABwABAHwAAQB8AAAACAABAH0AAQB9AAAACQABAH4AAQB+AAAACgADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAEAQABAQETT3BlblR5cGVTYW5zTWVkaXVtAAEBAT/4GwD4HAL4HQP4HgSLivdx9yAFHQAAAPIPHQAAAQcRix0AAASqEh4KADkGJf8eDx4PHgoAOQYl/x4PHg8MBwAOAQEMHysxOUFJUVlhaXF5gVZlcnNpb24gMC4xT3BlblR5cGVTYW5zIE1lZGl1bU9wZW5UeXBlU2Fuc01lZGl1bXVuaTEwMDc1dW5pMTAwNzZ1bmkxMDA3N3VuaTEwMDc4dW5pMTAwNzl1bmkxMDA3YXVuaTEwMDdidW5pMTAwN2N1bmkxMDA3ZHVuaTEwMDdlAAAAAYsBjAGNAY4BjwGQAZEBkgGTAZQACwIAAQAEAEsAxQFnAZUBygIuAqoDBAMZA4n6lA73Eu2OFUeLBYuSBZuLBZCLjo6LkgiLiwWL9xoFi5GJjYaICIuLBXuDBYiTBbKhBZKHBYv7MQWLhI6IkIsIi4sFm4sFi4QFDvcS7fcwFVCLBYNnBb2MpHaMYQiLiwWIZnV3YYgIi4sFd4uBkIqUCIuLBYuTjo+SiwiLiwWQjJGIk4QIi4sFk4aRiI6LCIuLBZyMlJmMpQiLiwWNq3eaYYoIi4sFiIuKjYuOCIuLBZrYBdWLBYd7BYuIiYmIiwiLiwUO9xKy3xWLiwWJkwWnlZmaip4Ii4sFi5uEk36LCIuLBXyMfYF+dwiLiwWFjgWWqpyboowIi4sFpYqYf4xzCIuLBYt8gn56fwiLiwWkiJd8i3EIi4sFiWRzd1yJCIuLBXmMgpCKlAiLiwWMko6PkYwIi4sFjouQiJKGCIuLBYqMjIuNigiLiwWShpGJkIsIi4sFno6VmY2kCIuLBY6qepZmgwgO9xKW90UV8IsFi4UFVvtABXaLBb/3MQVTiwWFjIiIioUIi4sFhHUFhYsFi74FDvcS6ccVpIsFi3cFcosFi2IFd4sFi7QFRYsFi54F2fcOBZeLBYv7DQU8ixXGiwWL5wVQLwUO9xL1wxWRiwWLVgUjiwWLkgW6wgWcn5Ogi6IIi4sFi6CDlXqLCIuLBXyMfn9/cwiLiwWEjQWUr52dpYsIi4sFp4mae4xtCIuLBYx5gHZ0cgiLiwVkXwW/iwWWipKVjqEIi4sFDvcS9wP3SRWLiwWLgwVgf3JyhGQIi4sFlZSWkJeLCIuLBaiJm3mNaQiLiwWIaHl4aogIi4sFaIx5ooq4CIuLBZDKrbDKlwhZNhWLiwWCi4KIgoUIi4sFin+LgoyECIuLBYxnlXmejAiLiwWejJWai6kIi4sFjKmAmnWKCA73Esr3QRWLiwV2jIBvi1MIi4sFilGWb6GNCIuLBaGKlqeKxAiLiwWLw4CndooIi5MVi4sFrIeebZBSCIuLBYhSeG1oiAiLiwVojXipicYIi4sFj8SeqayOCA73IPcS6RWLegX7BYsFi5wF9wWLBQ73EpqKFYuLBYmSBbaapKSSrgiLiwWAgH+FfosIi4sFcI58nYmsCIuLBYy0nKCsjAiLiwWuip1yjFoIi4sFi1BqZ0l/CNbqFYuLBY3AgaV1igiLiwV4i4J7i2sIi4sFimqVe6CMCIuLBZaMlJGTlggOAAAEAAAAAH4AAAB+AAAAfgAAAH4AAAB+AAAAfgAAAH4AAAB+AAAAjAAAAH4AAA=="
b = base64.b64decode(result)
print(b)


with open("ztku09.woff", "wb")as f:
    f.write(b)

fonts = TTFont("ztku09.woff")
fonts.saveXML("ztku09.xml")  # 保存成xml 文件

tf = TTFont(BytesIO(b))
print(tf)
print(tf.getGlyphNames())
# print(tf.getGlyphID())
print(tf.getBestCmap())
print(tf.getGlyphOrder())

for i in tf.getGlyphNames()[1:]:
    print("i   "+i)
    # print(tf["CFF"])

